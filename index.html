<!DOCTYPE html>
<html>
<head>
    <link rel="manifest" href="/manifest.json">

    <title>App Check</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
    </style>
</head>
<body>

<div id="content">
</div>

<script>
    function isApp() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.has('app=true');
    }

    const contentDiv = document.getElementById('content');

    if (isApp()) {
        contentDiv.innerHTML = "<h1>Welcome to the App!</h1><p>You're running this as a saved page.</p>";
    } else {
        contentDiv.innerHTML = "<h1>Download the App!</h1><p>Use the browser's 'Add to Home Screen' or 'Save as App' to install.</p>";
    }

    // Add the app parameter to the URL (if not already there)
    if (!isApp()) {
      if(window.location.search === ""){
        window.history.replaceState({}, document.title, window.location.pathname + "?app=true");
      } else {
        window.history.replaceState({}, document.title, window.location.pathname + window.location.search + "&app=true");
      }
    }

</script>
<script>if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('ðŸŽ‰ Hooray! You are running as a standalone app!');
  // You can add code here to change the way your app looks or behaves
} else {
  console.log('ðŸ˜¢ You are running in a browser tab.');
}
</script>
        <script>
        if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
        navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
     // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
    </script>
</body>

</html>
