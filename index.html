<!DOCTYPE html>
<html>
<head>
    <link rel="manifest" href="/manifest.json">

    <title>App Check</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
    </style>
</head>
<body>

<div id="content">
</div>

<script>
    function isApp() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.has('app=true');
    }

    const contentDiv = document.getElementById('content');

    if (isApp()) {
        contentDiv.innerHTML = "<h1>Welcome to the App!</h1><p>You're running this as a saved page.</p>";
    } else {
        contentDiv.innerHTML = "<h1>Download the App!</h1><p>Use the browser's 'Add to Home Screen' or 'Save as App' to install.</p>";
    }

    // Add the app parameter to the URL (if not already there)
    if (!isApp()) {
      if(window.location.search === ""){
        window.history.replaceState({}, document.title, window.location.pathname + "?app=true");
      } else {
        window.history.replaceState({}, document.title, window.location.pathname + window.location.search + "&app=true");
      }
    }

</script>

</body>
</html>
